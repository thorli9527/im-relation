syntax = "proto3";
import "google/protobuf/empty.proto";
package message;
enum ContentType {
  // æœªçŸ¥
  UNKNOWN = 0;
  // æ–‡æœ¬
  TEXT = 1;
  // å›¾ç‰‡
  IMAGE = 2;
  // éŸ³é¢‘
  AUDIO = 3;
  // è§†é¢‘
  VIDEO = 4;
  // å¯Œæ–‡æœ¬
  HTML = 5;
  // ä½ç½®
  LOCATION = 6;
  // æ–‡ä»¶
  FILE = 7;
  // è¡¨æƒ…
  EMOJI = 8;
  // å¼•ç”¨
  QUOTE = 9;
  // éŸ³è§†é¢‘é€šè¯ä¿¡ä»¤
  AV_CALL = 10;
  // VOIP é€šè¯è®°å½•
  VOIP = 11;
  // é€šçŸ¥
  NOTIFICATION = 12;
  // ç³»ç»Ÿæ¶ˆæ¯
  SYSTEM = 13;
  // æé†’
  REMINDER = 14;
  // å¥½å‹äº‹ä»¶
  FRIEND_EVENT = 15;
  // æ¶ˆæ¯æ’¤å›
  REVOKE = 17;
  // æ¶ˆæ¯è½¬å‘
  FORWARD = 18;
  // åç‰‡
  CONTACT_CARD = 19;
  // æŠ•ç¥¨
  VOTE = 20;
  // çº¢åŒ…
  RED_ENVELOPE = 21;
  // åŠ å¯†æ¶ˆæ¯ï¼ˆä»… MessageContent åŠ å¯†ï¼›é¡¶å±‚å…ƒæ•°æ®ä¿æŒæ˜æ–‡ï¼‰
  ENCRYPTED = 22;
  // é€šç”¨ä¸šåŠ¡ç¡®è®¤/é€šçŸ¥ï¼ˆå¤„ç†ç»“æœå›æ‰§ï¼‰
  ACK = 23;
  // è‡ªå®šä¹‰æ¶ˆæ¯
  CUSTOM = 100;
}



// ======================================
// ğŸ˜„ Emoji ç±»å‹å®šä¹‰ï¼ˆæ ‡å‡† + è‡ªå®šä¹‰ï¼‰
// ======================================
// å®šä¹‰äº†ç³»ç»Ÿä¸­æ”¯æŒçš„ emoji ç±»å‹ï¼ŒåŒ…æ‹¬æ ‡å‡† emoji å’Œè‡ªå®šä¹‰è¡¨æƒ…
enum EmojiType {
  EMOJI_UNKNOWN = 0;
  // å¾®ç¬‘è¡¨æƒ…
  SMILE = 1;
  // å’§å˜´ç¬‘è¡¨æƒ…
  GRIN = 2;
  // æµæ³ªè¡¨æƒ…
  TEARS = 3;
  // åèˆŒå¤´è¡¨æƒ…
  STUCK_OUT_TONGUE = 4;
  // é¼“æŒè¡¨æƒ…
  CLAP = 25;
  // ä¾¿ä¾¿è¡¨æƒ…
  POOP = 28;
  // çˆ±å¿ƒè¡¨æƒ…
  HEART = 21;
  // ... å¯ç»§ç»­æ‰©å±•æ ‡å‡† Emoji
  // è‡ªå®šä¹‰è¡¨æƒ…ï¼ˆé€šè¿‡å›¾ç‰‡ URL æŒ‡å®šï¼‰
  CUSTOM_EMOJI = 1000;
}

// é€šè¯åª’ä½“ç±»å‹
enum CallMediaType {
  // è¯­éŸ³
  CALL_AUDIO = 0;
  // è§†é¢‘
  CALL_VIDEO = 1;
}

// é€šè¯ç»“æŸåŸå› 
enum CallEndReason {
  // æœªæŒ‡å®š
  CER_UNSPECIFIED = 0;
  // ä¸»åŠ¨å–æ¶ˆ
  CER_CANCELLED = 1;
  // å¯¹æ–¹æ‹’ç»
  CER_REJECTED = 2;
  // å¯¹æ–¹å¿™
  CER_BUSY = 3;
  // è¶…æ—¶æœªåº”ç­”
  CER_TIMEOUT = 4;
  // æ­£å¸¸æŒ‚æ–­
  CER_HANGUP = 5;
  // å¤±è´¥/å¼‚å¸¸
  CER_FAILED = 6;
}

// é€šè¯å†…ä¿®æ”¹ç±»å‹
enum CallModifyType {
  // é™éŸ³/å–æ¶ˆé™éŸ³
  CMT_MUTE = 0;
  // å¼€/å…³æ‘„åƒå¤´
  CMT_CAMERA = 1;
  // ä¿æŒ/æ¢å¤é€šè¯
  CMT_HOLD = 2;
  // åˆ‡æ¢å‰åæ‘„
  CMT_SWITCH_CAMERA = 3;
}
enum ChatScene {
  // é»˜è®¤æœªçŸ¥åœºæ™¯ï¼ˆé˜²å¾¡å€¼ï¼‰
  CHAT_UNKNOWN = 0;
  // å•äººä¼šè¯ï¼šç”¨æˆ·ä¸ç”¨æˆ·ä¹‹é—´çš„ç§èŠ
  SINGLE = 1;
  // ç¾¤èŠä¼šè¯ï¼šç¾¤ç»„å†…çš„å¤šäººèŠå¤©
  GROUP = 2;
}
// ======================================
// ğŸ’  æ¶ˆæ¯å†…å®¹ç»“æ„ï¼ˆoneof ç±»å‹ï¼‰
// ======================================
// ä½¿ç”¨ oneof å®šä¹‰ä¸åŒç±»å‹çš„æ¶ˆæ¯å†…å®¹ï¼Œç¡®ä¿æ¶ˆæ¯ç±»å‹çš„äº’æ–¥æ€§
message MessageContent {
  oneof content {
    // æ–‡æœ¬æ¶ˆæ¯ï¼šçº¯æ–‡æœ¬å†…å®¹
    TextContent text = 1;
    // å›¾ç‰‡æ¶ˆæ¯ï¼šå›¾ç‰‡æ–‡ä»¶
    ImageContent image = 2;
    // éŸ³é¢‘æ¶ˆæ¯ï¼šè¯­éŸ³æˆ–éŸ³ä¹
    AudioContent audio = 3;
    // è§†é¢‘æ¶ˆæ¯ï¼šè§†é¢‘æ–‡ä»¶
    VideoContent video = 4;
    // ä½ç½®æ¶ˆæ¯ï¼šåœ°ç†ä½ç½®ä¿¡æ¯
    LocationContent location = 5;
    // æ–‡ä»¶æ¶ˆæ¯ï¼šä»»æ„æ–‡ä»¶ç±»å‹
    FileContent file = 6;
    // éŸ³è§†é¢‘é€šè¯ä¿¡ä»¤ï¼šé€šè¯æ§åˆ¶æ¶ˆæ¯
    AVCallContent av_call = 7;
    // è‡ªå®šä¹‰æ¶ˆæ¯ï¼šå¼€å‘è€…è‡ªå®šä¹‰ç»“æ„
    CustomContent custom = 8;
    // è¡¨æƒ…æ¶ˆæ¯ï¼šemoji è¡¨æƒ…
    EmojiContent emoji = 9;
    // æ’¤å›æ¶ˆæ¯ï¼šæ¶ˆæ¯æ’¤å›é€šçŸ¥
    RevokeContent revoke = 10;
    // è½¬å‘æ¶ˆæ¯ï¼šæ¶ˆæ¯è½¬å‘
    ForwardContent forward = 11;
    // å¼•ç”¨å›å¤æ¶ˆæ¯ï¼šå›å¤ç‰¹å®šæ¶ˆæ¯
    QuoteContent quote = 12;
    // HTML å¡ç‰‡ï¼šå¯Œæ–‡æœ¬å†…å®¹
    HtmlContent html = 13;
    // VOIP é€šè¯è®°å½•ï¼šé€šè¯æ—¥å¿—
    VoipContent voip = 14;
    // é€šçŸ¥æ¶ˆæ¯ï¼šç³»ç»Ÿé€šçŸ¥
    NotificationContent notification = 15;
    // ç³»ç»Ÿæ¶ˆæ¯ï¼šç³»ç»Ÿçº§æ¶ˆæ¯
    SystemContent system = 16;
    // æé†’æ¶ˆæ¯ï¼šæé†’äº‹é¡¹
    ReminderContent reminder = 17;
    // ç¾¤ç»„äº‹ä»¶ï¼šç¾¤ç»„ç›¸å…³äº‹ä»¶
    GroupEventContent group_event = 18;
    // åç‰‡æ¶ˆæ¯ï¼šè”ç³»äººåˆ†äº«
    ContactCardContent contact_card = 19;
    // æŠ•ç¥¨æ¶ˆæ¯ï¼šæŠ•ç¥¨å†…å®¹
    VoteContent vote = 20;
    // çº¢åŒ…æ¶ˆæ¯ï¼šçº¢åŒ…å†…å®¹
    RedEnvelopeContent red_envelope = 21;
    // åŠ å¯†å†…å®¹å°è£…ï¼ˆç«¯åˆ°ç«¯åŠ å¯†ï¼‰
    EncryptedContent encrypted = 22;
    // é€šç”¨ä¸šåŠ¡ç¡®è®¤/é€šçŸ¥ï¼ˆå¤„ç†ç»“æœå›æ‰§ï¼‰
    AckContent ack = 23;
  }
}

// ===============================
// âœ… é€šç”¨ä¸šåŠ¡ç¡®è®¤/é€šçŸ¥ï¼ˆå¤„ç†ç»“æœå›æ‰§ï¼‰
// ===============================
// ç”¨äºæœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å›ä¼ â€œè¯¥ä¸šåŠ¡å·²å¤„ç†â€çš„æ ‡å‡†ç»“æ„ã€‚
message AckContent {
  // æ˜¯å¦æˆåŠŸ
  bool ok = 1;
  // ä¸šåŠ¡é”™è¯¯ç ï¼ˆ0 è¡¨ç¤ºæ— é”™è¯¯ï¼‰
  int32 code = 2;
  // æ–‡æœ¬ä¿¡æ¯ï¼ˆå¯æœ¬åœ°åŒ–ï¼‰
  string message = 3;
  // è¯·æ±‚çš„ä¸šåŠ¡ç§ç±»ï¼ˆå¦‚ socket çš„ MsgKind å€¼ï¼‰
  int32 request_kind = 4;
  // å¯é€‰çš„å¼•ç”¨æ¶ˆæ¯ IDï¼ˆä¸æ­¤æ¬¡å¤„ç†ç›¸å…³çš„æ¶ˆæ¯ï¼‰
  optional uint64 ref_message_id = 5;
  // é™„åŠ æ•°æ®ï¼ˆé¢„ç•™ï¼‰
  bytes extra = 6;
}

// ===============================
// ğŸ“„ æ–‡æœ¬æ¶ˆæ¯
// ===============================
// æ”¯æŒçº¯æ–‡æœ¬å’Œå¯Œæ–‡æœ¬æ ¼å¼ï¼ŒåŒ…å«å†…è”å®ä½“ï¼ˆé“¾æ¥ã€@ç”¨æˆ·ã€è¯é¢˜ç­‰ï¼‰
message TextContent {
  // æ–‡æœ¬ä¸»ä½“å†…å®¹ï¼šæ¶ˆæ¯çš„æ–‡æœ¬å†…å®¹
  string text = 1;
  // å¯Œæ–‡æœ¬å®ä½“ï¼Œå¦‚é“¾æ¥/@ç”¨æˆ·/è¯é¢˜ï¼šæ–‡æœ¬ä¸­çš„ç‰¹æ®Šå…ƒç´ 
  repeated InlineEntity entities = 2;
}

// å†…è”å®ä½“ï¼šç”¨äºåœ¨æ–‡æœ¬ä¸­æ ‡è®°ç‰¹æ®Šå…ƒç´ 
message InlineEntity {
  // èµ·å§‹ä½ç½®ï¼ˆUTF-8 å­—ç¬¦ç´¢å¼•ï¼‰ï¼šå®ä½“åœ¨æ–‡æœ¬ä¸­çš„å¼€å§‹ä½ç½®
  int32 start = 1;
  // ç»“æŸä½ç½®ï¼ˆä¸å«ï¼‰ï¼šå®ä½“åœ¨æ–‡æœ¬ä¸­çš„ç»“æŸä½ç½®
  int32 end = 2;
  // ç±»å‹ï¼šlink / mention / hashtagï¼šå®ä½“çš„ç±»å‹
  string type = 3;
  // é™„åŠ å€¼ï¼šURLã€ç”¨æˆ·IDç­‰ï¼šå®ä½“çš„å…·ä½“å€¼
  string value = 4;
}

// ===============================
// ğŸ–¼ï¸ å›¾ç‰‡æ¶ˆæ¯
// ===============================
// åŒ…å«å›¾ç‰‡çš„å®Œæ•´ä¿¡æ¯ï¼Œæ”¯æŒåŸå›¾å’Œç¼©ç•¥å›¾
message ImageContent {
  // åŸå›¾ URLï¼šå›¾ç‰‡çš„å®Œæ•´åœ°å€
  string url = 1;
  // ç¼©ç•¥å›¾ URLï¼šå›¾ç‰‡çš„ç¼©ç•¥å›¾åœ°å€
  string thumbnail_url = 2;
  // å®½åº¦ï¼ˆåƒç´ ï¼‰ï¼šå›¾ç‰‡çš„å®½åº¦
  int32 width = 3;
  // é«˜åº¦ï¼ˆåƒç´ ï¼‰ï¼šå›¾ç‰‡çš„é«˜åº¦
  int32 height = 4;
  // æ ¼å¼ï¼ˆå¦‚ jpg/pngï¼‰ï¼šå›¾ç‰‡çš„æ–‡ä»¶æ ¼å¼
  string format = 5;
  // æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ï¼šå›¾ç‰‡æ–‡ä»¶çš„å¤§å°
  int64 size = 6;
}

// ===============================
// ğŸ”Š éŸ³é¢‘æ¶ˆæ¯
// ===============================
// æ”¯æŒè¯­éŸ³èŠå¤©å’ŒéŸ³ä¹æ’­æ”¾ï¼ŒåŒ…å«æ—¶é•¿å’Œæ ¼å¼ä¿¡æ¯
message AudioContent {
  // éŸ³é¢‘æ–‡ä»¶ URLï¼šéŸ³é¢‘æ–‡ä»¶çš„åœ°å€
  string url = 1;
  // æ—¶é•¿ï¼ˆç§’ï¼‰ï¼šéŸ³é¢‘çš„æ’­æ”¾æ—¶é•¿
  int32 duration = 2;
  // æ ¼å¼ï¼šéŸ³é¢‘æ–‡ä»¶æ ¼å¼ï¼ˆå¦‚ mp3/wavï¼‰
  string format = 3;
  // æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ï¼šéŸ³é¢‘æ–‡ä»¶çš„å¤§å°
  int64 size = 4;
  // æ˜¯å¦è¯­éŸ³ï¼ˆvs éŸ³ä¹ç±»éŸ³é¢‘ï¼‰ï¼štrueè¡¨ç¤ºè¯­éŸ³ï¼Œfalseè¡¨ç¤ºéŸ³ä¹
  bool is_voice = 5;
}

// ===============================
// ğŸï¸ è§†é¢‘æ¶ˆæ¯
// ===============================
// åŒ…å«è§†é¢‘æ–‡ä»¶å’Œå°é¢å›¾ï¼Œæ”¯æŒæ’­æ”¾æ§åˆ¶
message VideoContent {
  // è§†é¢‘æ–‡ä»¶ URLï¼šè§†é¢‘æ–‡ä»¶çš„åœ°å€
  string url = 1;
  // æ—¶é•¿ï¼ˆç§’ï¼‰ï¼šè§†é¢‘çš„æ’­æ”¾æ—¶é•¿
  int32 duration = 2;
  // å°é¢å›¾ URLï¼šè§†é¢‘çš„å°é¢å›¾ç‰‡
  string cover_url = 3;
  // å®½åº¦ï¼ˆåƒç´ ï¼‰ï¼šè§†é¢‘çš„å®½åº¦
  int32 width = 4;
  // é«˜åº¦ï¼ˆåƒç´ ï¼‰ï¼šè§†é¢‘çš„é«˜åº¦
  int32 height = 5;
  // æ ¼å¼ï¼šè§†é¢‘æ–‡ä»¶æ ¼å¼ï¼ˆå¦‚ mp4/aviï¼‰
  string format = 6;
  // æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ï¼šè§†é¢‘æ–‡ä»¶çš„å¤§å°
  int64 size = 7;
}

// ===============================
// ğŸ“ ä½ç½®æ¶ˆæ¯
// ===============================
// åŒ…å«åœ°ç†ä½ç½®ä¿¡æ¯ï¼Œæ”¯æŒåœ°å€æè¿°å’Œåœ°å›¾æ˜¾ç¤º
message LocationContent {
  // çº¬åº¦ï¼šåœ°ç†ä½ç½®çš„çº¬åº¦åæ ‡
  double latitude = 1;
  // ç»åº¦ï¼šåœ°ç†ä½ç½®çš„ç»åº¦åæ ‡
  double longitude = 2;
  // åœ°å€æè¿°ï¼šä½ç½®çš„æ–‡å­—æè¿°
  string address = 3;
  // åœ°ç‚¹åç§°ï¼šå…·ä½“çš„åœ°ç‚¹åç§°
  string poi_name = 4;
  // ç¼©ç•¥å›¾ URLï¼šä½ç½®çš„åœ°å›¾ç¼©ç•¥å›¾
  string thumbnail_url = 5;
}

// ===============================
// ğŸ“ æ–‡ä»¶æ¶ˆæ¯
// ===============================
// æ”¯æŒä»»æ„æ–‡ä»¶ç±»å‹ï¼ŒåŒ…å«æ–‡ä»¶ä¿¡æ¯å’Œå›¾æ ‡
message FileContent {
  // æ–‡ä»¶ URLï¼šæ–‡ä»¶çš„ä¸‹è½½åœ°å€
  string url = 1;
  // æ–‡ä»¶åï¼šæ–‡ä»¶çš„æ˜¾ç¤ºåç§°
  string name = 2;
  // æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ï¼šæ–‡ä»¶çš„å¤§å°
  int64 size = 3;
  // æ–‡ä»¶ç±»å‹ï¼šæ–‡ä»¶çš„ MIME ç±»å‹
  string file_type = 4;
  // å›¾æ ‡ URLï¼šæ–‡ä»¶ç±»å‹çš„å›¾æ ‡
  string icon_url = 5;
}

// ===============================
// ğŸ“ éŸ³è§†é¢‘é€šè¯ä¿¡ä»¤
// ===============================
// ç”¨äºéŸ³è§†é¢‘é€šè¯çš„æ§åˆ¶ä¿¡ä»¤ï¼ŒåŒ…å«é€šè¯çŠ¶æ€å’Œå‚ä¸è€…ä¿¡æ¯
message AVCallContent {
  // é€šè¯ IDï¼šé€šè¯çš„å”¯ä¸€æ ‡è¯†
  string call_id = 1;
  // å‘èµ·è€… IDï¼šé€šè¯çš„å‘èµ·ç”¨æˆ·
  int64 initiator_uid = 2;
  // å‚ä¸è€… ID åˆ—è¡¨ï¼šé€šè¯çš„æ‰€æœ‰å‚ä¸è€…
  repeated int64 participant_ids = 3;
  enum CallAction {
    // æœªçŸ¥æ“ä½œ
    UNKNOWN = 0;
    // é‚€è¯·ï¼šå‘èµ·é€šè¯é‚€è¯·
    INVITE = 1;
    // æ¥å—ï¼šæ¥å—é€šè¯é‚€è¯·
    ACCEPT = 2;
    // æ‹’ç»ï¼šæ‹’ç»é€šè¯é‚€è¯·
    REJECT = 3;
    // å–æ¶ˆï¼šå–æ¶ˆé€šè¯
    CANCEL = 4;
    // ç»“æŸï¼šç»“æŸé€šè¯
    END = 5;
    // è¶…æ—¶ï¼šé€šè¯è¶…æ—¶
    TIMEOUT = 6;
  }
  // é€šè¯æ“ä½œï¼šå…·ä½“çš„é€šè¯åŠ¨ä½œ
  CallAction action = 4;
  enum CallType {
    // éŸ³é¢‘é€šè¯ï¼šä»…è¯­éŸ³é€šè¯
    AUDIO = 0;
    // è§†é¢‘é€šè¯ï¼šéŸ³è§†é¢‘é€šè¯
    VIDEO = 1;
  }
  // é€šè¯ç±»å‹ï¼šé€šè¯çš„ç±»å‹
  CallType type = 5;
  // æ—¶é—´æˆ³ï¼šæ“ä½œçš„æ—¶é—´
  int64 timestamp = 6;
  // æ—¶é•¿ï¼ˆç§’ï¼‰ï¼šé€šè¯çš„æŒç»­æ—¶é—´
  int32 duration = 7;
}

// ===============================
// ğŸ’  è‡ªå®šä¹‰ç»“æ„åŒ–æ¶ˆæ¯
// ===============================
// æ”¯æŒå¼€å‘è€…è‡ªå®šä¹‰çš„æ¶ˆæ¯ç»“æ„ï¼Œé€šå¸¸ä»¥ JSON æ ¼å¼æ‰¿è½½
message CustomContent {
  // è‡ªå®šä¹‰ç±»å‹ï¼šæ¶ˆæ¯çš„è‡ªå®šä¹‰ç±»å‹æ ‡è¯†
  string custom_type = 1;
  // JSON è½½è·ï¼šè‡ªå®šä¹‰æ¶ˆæ¯çš„ JSON æ•°æ®
  string json_payload = 2;
}

// ===============================
// ğŸ˜„ è¡¨æƒ…æ¶ˆæ¯
// ===============================
// æ”¯æŒæ ‡å‡† emoji å’Œè‡ªå®šä¹‰è¡¨æƒ…
message EmojiContent {
  // è¡¨æƒ…ç±»å‹ï¼šæ ‡å‡† emoji ç±»å‹
  EmojiType emoji = 1;
  // è‡ªå®šä¹‰è¡¨æƒ… URLï¼šè‡ªå®šä¹‰è¡¨æƒ…çš„å›¾ç‰‡åœ°å€
  string custom_emoji_url = 2;
}

// ===============================
// â›” æ’¤å›æ¶ˆæ¯
// ===============================
// ç”¨äºé€šçŸ¥æ¶ˆæ¯æ’¤å›ï¼ŒåŒ…å«æ’¤å›çš„ç›®æ ‡æ¶ˆæ¯ä¿¡æ¯
message RevokeContent {
  // ç›®æ ‡æ¶ˆæ¯ IDï¼šè¢«æ’¤å›çš„æ¶ˆæ¯ID
  int64 target_message_id = 1;
  // æ“ä½œè€… IDï¼šæ‰§è¡Œæ’¤å›æ“ä½œçš„ç”¨æˆ·
  int64 operator_id = 2;
  // æ’¤å›æ—¶é—´ï¼šæ’¤å›æ“ä½œçš„æ—¶é—´æˆ³
  int64 revoke_time = 3;
}

// ===============================
// ğŸ“¤ è½¬å‘æ¶ˆæ¯
// ===============================
// ç”¨äºæ¶ˆæ¯è½¬å‘ï¼ŒåŒ…å«åŸæ¶ˆæ¯çš„åŸºæœ¬ä¿¡æ¯
message ForwardContent {
  // åŸæ¶ˆæ¯ IDï¼šè¢«è½¬å‘æ¶ˆæ¯çš„ID
  uint64 original_message_id = 1;
  // åŸå‘é€è€… IDï¼šåŸæ¶ˆæ¯çš„å‘é€è€…
  string original_sender_id = 2;
  // åŸæ¶ˆæ¯ç±»å‹ï¼šåŸæ¶ˆæ¯çš„ç±»å‹
  ContentType original_type = 3;
  // æ‘˜è¦ï¼šè½¬å‘çš„æ‘˜è¦ä¿¡æ¯
  string summary = 4;
}

// ===============================
// ğŸ“Œ å¼•ç”¨å›å¤æ¶ˆæ¯
// ===============================
// ç”¨äºå›å¤ç‰¹å®šæ¶ˆæ¯ï¼ŒåŒ…å«è¢«å¼•ç”¨æ¶ˆæ¯çš„ä¿¡æ¯
message QuoteContent {
  // è¢«å¼•ç”¨æ¶ˆæ¯ IDï¼šè¢«å›å¤æ¶ˆæ¯çš„ID
  uint64 quoted_message_id = 1;
  // è¢«å¼•ç”¨å†…å®¹é¢„è§ˆï¼šè¢«å›å¤æ¶ˆæ¯çš„é¢„è§ˆ
  string quoted_content_preview = 2;
  // å¼•ç”¨æ–‡æœ¬ï¼šå›å¤çš„æ–‡æœ¬å†…å®¹
  string quote_text = 3;
}

// ===============================
// ğŸŒ HTML å¡ç‰‡
// ===============================
// ç”¨äºå¯Œæ–‡æœ¬å†…å®¹ï¼Œæ”¯æŒç½‘é¡µé“¾æ¥å’Œé¢„è§ˆ
message HtmlContent {
  // æ ‡é¢˜ï¼šå¡ç‰‡çš„æ ‡é¢˜
  string title = 1;
  // URLï¼šé“¾æ¥åœ°å€
  string url = 2;
  // é¢„è§ˆï¼šå†…å®¹çš„é¢„è§ˆæ–‡æœ¬
  string preview = 3;
}

// ===============================
// ğŸ“ VOIP é€šè¯è®°å½•
// ===============================
// ç”¨äºè®°å½•é€šè¯å†å²ï¼ŒåŒ…å«é€šè¯çš„åŸºæœ¬ä¿¡æ¯
message VoipContent {
  // ä¸»å« IDï¼šå‘èµ·é€šè¯çš„ç”¨æˆ·
  string caller_id = 1;
  // è¢«å« IDï¼šæ¥æ”¶é€šè¯çš„ç”¨æˆ·
  string callee_id = 2;
  // é€šè¯æ—¶é•¿ï¼ˆç§’ï¼‰ï¼šé€šè¯çš„æŒç»­æ—¶é—´
  int64 duration = 3;
  // é€šè¯çŠ¶æ€ï¼šé€šè¯çš„ç»“æœçŠ¶æ€
  string status = 4;
}

// ===============================
// ğŸ”” é€šçŸ¥æ¶ˆæ¯
// ===============================
// ç”¨äºç³»ç»Ÿé€šçŸ¥ï¼ŒåŒ…å«æ ‡é¢˜ã€å†…å®¹å’Œå…ƒæ•°æ®
message NotificationContent {
  // æ ‡é¢˜ï¼šé€šçŸ¥çš„æ ‡é¢˜
  string title = 1;
  // å†…å®¹ï¼šé€šçŸ¥çš„ä¸»ä½“å†…å®¹
  string body = 2;
  // å…ƒæ•°æ®ï¼šé€šçŸ¥çš„é™„åŠ ä¿¡æ¯
  map<string, string> metadata = 3;
}

// ===============================
// âš™ï¸ ç³»ç»Ÿæ¶ˆæ¯
// ===============================
// ç”¨äºç³»ç»Ÿçº§æ¶ˆæ¯ï¼ŒåŒ…å«ç³»ç»Ÿä»£ç å’Œå†…å®¹
message SystemContent {
  // å†…å®¹ï¼šç³»ç»Ÿæ¶ˆæ¯çš„å†…å®¹
  string content = 1;
  // ä»£ç ï¼šç³»ç»Ÿæ¶ˆæ¯çš„ä»£ç æ ‡è¯†
  string code = 2;
}

// ===============================
// â° æé†’äº‹é¡¹
// ===============================
// ç”¨äºæé†’åŠŸèƒ½ï¼ŒåŒ…å«æé†’æ–‡æœ¬å’Œæ—¶é—´
message ReminderContent {
  // æ–‡æœ¬ï¼šæé†’çš„å†…å®¹
  string text = 1;
  // æé†’æ—¶é—´ï¼šæé†’è§¦å‘çš„æ—¶é—´æˆ³
  int64 remind_at = 2;
}

// ===============================
// ğŸ‘¥ ç¾¤ç»„äº‹ä»¶
// ===============================
// ç”¨äºç¾¤ç»„ç›¸å…³äº‹ä»¶ï¼ŒåŒ…å«ç¾¤ç»„ä¿¡æ¯å’Œæ“ä½œè€…
message GroupEventContent {
  // ç¾¤ç»„ IDï¼šäº‹ä»¶ç›¸å…³çš„ç¾¤ç»„
  int64 group_id = 1;
  // äº‹ä»¶ï¼šäº‹ä»¶çš„å…·ä½“æè¿°
  string event = 2;
  // æ“ä½œè€… IDï¼šæ‰§è¡Œæ“ä½œçš„ç”¨æˆ·
  int64 operator_id = 3;
}



// ===============================
// ğŸ“‡ åç‰‡æ¶ˆæ¯
// ===============================
// ç”¨äºåˆ†äº«è”ç³»äººä¿¡æ¯ï¼ŒåŒ…å«ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯
message ContactCardContent {
  // ç›®æ ‡ IDï¼šè¢«åˆ†äº«ç”¨æˆ·çš„ID
  string target_id = 1;
  // æ˜¾ç¤ºåç§°ï¼šç”¨æˆ·çš„æ˜¾ç¤ºåç§°
  string display_name = 2;
  // å¤´åƒ URLï¼šç”¨æˆ·çš„å¤´åƒåœ°å€
  string avatar_url = 3;
  // å¡ç‰‡ç±»å‹ï¼šåç‰‡çš„ç±»å‹ï¼ˆç”¨æˆ·/ç¾¤ç»„ï¼‰
  string card_type = 4;
}

// ===============================
// ğŸ“Š æŠ•ç¥¨æ¶ˆæ¯
// ===============================
// ç”¨äºç¾¤ç»„æŠ•ç¥¨åŠŸèƒ½ï¼ŒåŒ…å«æŠ•ç¥¨é€‰é¡¹å’Œç»“æœ
message VoteContent {
  // ä¸»é¢˜ï¼šæŠ•ç¥¨çš„ä¸»é¢˜
  string topic = 1;
  // é€‰é¡¹ï¼šæŠ•ç¥¨çš„é€‰é¡¹åˆ—è¡¨
  repeated string options = 2;
  // ç»“æœï¼šæŠ•ç¥¨ç»“æœç»Ÿè®¡
  map<string, int32> result = 3;
  // å¤šé€‰ï¼šæ˜¯å¦å…è®¸å¤šé€‰
  bool multi_choice = 4;
}

// ===============================
// ğŸ’° çº¢åŒ…æ¶ˆæ¯
// ===============================
// ç”¨äºçº¢åŒ…åŠŸèƒ½ï¼ŒåŒ…å«çº¢åŒ…é‡‘é¢å’ŒçŠ¶æ€
message RedEnvelopeContent {
  // å‘é€è€… IDï¼šçº¢åŒ…å‘é€è€…
  int64 sender_id = 1;
  // é‡‘é¢ï¼šçº¢åŒ…é‡‘é¢ï¼ˆåˆ†ï¼‰
  int32 amount = 2;
  // ç¥ç¦è¯­ï¼šçº¢åŒ…çš„ç¥ç¦è¯­
  string blessing = 3;
  // æ˜¯å¦å·²é¢†å–ï¼šçº¢åŒ…æ˜¯å¦å·²è¢«é¢†å–
  bool claimed = 4;
}

// ======================================
// âœ‚ï¸ Segment - æ¶ˆæ¯æ®µç»“æ„ï¼ˆç”¨äºå¤åˆå†…å®¹ï¼‰
// ======================================
// è¡¨ç¤ºä¸€æ¡æ¶ˆæ¯ä¸­çš„ä¸€ä¸ªç‹¬ç«‹æ®µï¼ˆå¦‚æ–‡æœ¬æ®µã€å›¾ç‰‡æ®µç­‰ï¼‰ï¼Œæ”¯æŒæ’åºã€ç¼–è¾‘ã€æ ‡è®°ç­‰
message Segment {
  // æ¶ˆæ¯æ®µå†…å®¹ï¼ˆå¦‚æ–‡æœ¬ã€å›¾ç‰‡ç­‰ï¼Œä½¿ç”¨ oneof å°è£…ï¼‰ï¼šæ®µçš„å…·ä½“å†…å®¹
  MessageContent body = 1;
  // æ¶ˆæ¯å†…é¡ºåºç¼–å·ï¼ˆç”¨äºå‰ç«¯æ¸²æŸ“æ’åºï¼‰ï¼šæ®µåœ¨æ¶ˆæ¯ä¸­çš„é¡ºåº
  uint64 seq_in_msg = 2;
  // é€šç”¨æ‰©å±•å­—æ®µï¼ˆä»¥å­—ç¬¦ä¸²é”®å€¼å¯¹å­˜å‚¨ JSON æ‰å¹³æ•°æ®ï¼‰ï¼šæ®µçš„å…ƒæ•°æ®
  map<string, string> metadata = 3;
}

// ======================================
// ğŸ“¨ é¡¶å±‚æ¶ˆæ¯ç»“æ„
// ======================================
// å®šä¹‰äº†æ¶ˆæ¯çš„åŸºæœ¬æ¡†æ¶ï¼ŒåŒ…å«å‘é€è€…ã€æ¥æ”¶è€…ã€æ—¶é—´ç­‰å…ƒæ•°æ®
message Content {
  // å”¯ä¸€æ¶ˆæ¯ IDï¼ˆå®¢æˆ·ç«¯ç”Ÿæˆæˆ–æœåŠ¡ç«¯è¡¥å…¨ï¼‰ï¼šæ¶ˆæ¯çš„å”¯ä¸€æ ‡è¯†
  optional uint64 message_id = 1;
  // æ¶ˆæ¯å‘é€æ–¹ï¼šå‘é€æ¶ˆæ¯çš„ç”¨æˆ·ID
  int64 sender_id = 2;
  // æ¶ˆæ¯æ¥æ”¶æ–¹ï¼ˆå•èŠä¸ºå¯¹æ–¹ IDï¼Œç¾¤èŠä¸ºç¾¤ IDï¼‰ï¼šæ¥æ”¶æ¶ˆæ¯çš„ç›®æ ‡
  int64 receiver_id = 3;
  // æ¶ˆæ¯å‘é€æ—¶é—´ï¼ˆæ¯«ç§’æ—¶é—´æˆ³ï¼‰ï¼šæ¶ˆæ¯åˆ›å»ºçš„æ—¶é—´
  int64 timestamp = 4;

  // ä¸»æ¶ˆæ¯ç±»å‹ï¼ˆç”¨äºå¿«é€Ÿæ¸²æŸ“åˆ¤æ–­ï¼‰ï¼šæ¶ˆæ¯çš„ä¸»è¦ç±»å‹
  ContentType message_type = 5;
  // æ¶ˆæ¯æ‰€å±ä¼šè¯ç±»å‹ï¼ˆå•èŠ/ç¾¤èŠï¼‰ï¼šæ¶ˆæ¯çš„ä¼šè¯åœºæ™¯
  ChatScene scene = 6;

  // å¤šæ®µå¤åˆå†…å®¹ï¼ˆå¦‚æ–‡æœ¬ + å›¾ç‰‡ï¼‰ï¼šæ¶ˆæ¯çš„å…·ä½“å†…å®¹
  repeated MessageContent contents = 10;
}

// =====================
// è¯­éŸ³/è§†é¢‘é€šè¯ä¿¡ä»¤ï¼ˆMK_FRIEND_CALL_*ï¼‰
// =====================

// å‘èµ·å‘¼å«ï¼ˆå¸¦ SDP offerï¼‰
message CallInvite {
  // é€šè¯IDï¼ˆå…¨å±€å”¯ä¸€å­—ç¬¦ä¸²/é›ªèŠ±ï¼‰
  string call_id = 1;
  // ä¸»å«ç”¨æˆ·ID
  int64 from_user_id = 2;
  // è¢«å«ç”¨æˆ·ID
  int64 to_user_id = 3;
  // åª’ä½“ç±»å‹ï¼ˆè¯­éŸ³/è§†é¢‘ï¼‰
  CallMediaType media_type = 4;
  // SDP offerï¼ˆè‹¥ä½¿ç”¨ WebRTCï¼‰
  string sdp_offer = 5;
  // æ‰©å±•å­—æ®µ
  optional string ext = 6;
  // å‘èµ·æ—¶é—´
  uint64 created_at = 7;
}

// å–æ¶ˆå‘¼å«ï¼ˆæŒ¯é“ƒé˜¶æ®µï¼‰
message CallCancel {
  // é€šè¯ID
  string call_id = 1;
  // æ“ä½œè€…
  int64 operator_user_id = 2;
  // åŸå› ï¼ˆå¯é€‰ï¼‰
  optional string reason = 3;
  // æ—¶é—´
  uint64 at = 4;
}

// æ‹’ç»å‘¼å«
message CallReject {
  // é€šè¯ID
  string call_id = 1;
  // æ‹’ç»è€…
  int64 reject_user_id = 2;
  // åŸå› ï¼ˆå¯é€‰ï¼‰
  optional string reason = 3;
  // æ—¶é—´
  uint64 at = 4;
}

// æ¥å—å‘¼å«ï¼ˆå¸¦ SDP answerï¼‰
message CallAccept {
  // é€šè¯ID
  string call_id = 1;
  // æ¥å—è€…
  int64 accept_user_id = 2;
  // SDP answerï¼ˆè‹¥ä½¿ç”¨ WebRTCï¼‰
  string sdp_answer = 3;
  // æ—¶é—´
  uint64 at = 4;
}

// é€šè¯ç»“æŸ/æŒ‚æ–­
message CallHangup {
  // é€šè¯ID
  string call_id = 1;
  // æ“ä½œè€…
  int64 operator_user_id = 2;
  // ç»“æŸåŸå› 
  CallEndReason reason = 3;
  // é€šè¯æ—¶é•¿ï¼ˆæ¯«ç§’ï¼Œå¯é€‰ï¼‰
  optional uint64 duration_ms = 4;
  // æ—¶é—´
  uint64 at = 5;
}

// é€šè¯ä¸­ä¿®æ”¹ï¼ˆé™éŸ³/å¼€å…³æ‘„åƒå¤´ç­‰ï¼‰
message CallModify {
  // é€šè¯ID
  string call_id = 1;
  // æ“ä½œè€…
  int64 operator_user_id = 2;
  // ä¿®æ”¹ç±»å‹
  CallModifyType modify = 3;
  // å¼€å…³å€¼ï¼ˆtrue=å¼€/å¯ç”¨ï¼Œfalse=å…³/ç¦ç”¨ï¼‰
  bool on = 4;
  // æ—¶é—´
  uint64 at = 5;
}

// DTMF ä¿¡ä»¤
message CallDtmf {
  // é€šè¯ID
  string call_id = 1;
  // å‘é€è€…
  int64 from_user_id = 2;
  // DTMF æŒ‰é”®åºåˆ—ï¼ˆå¦‚ "123#*")
  string digits = 3;
  // æ—¶é—´
  uint64 at = 4;
}

// ===============
// æ¶ˆæ¯çŠ¶æ€/æ“ä½œæ¨¡å‹
// ===============

// é€è¾¾å›æ‰§ç¡®è®¤ï¼ˆå®¢æˆ·ç«¯â†’æœåŠ¡ç«¯ï¼šæ”¶åˆ° deliveredï¼‰
message MsgDeliveredAck {
  int64 msg_id = 1;
  int64 ack_user_id = 2;
  int64 ack_at = 3;
}

// å·²è¯»ä¸ŠæŠ¥ï¼ˆå®¢æˆ·ç«¯â†’æœåŠ¡ç«¯ï¼‰
message MsgRead {
  int64 msg_id = 1;
  int64 user_id = 2;
  int64 chat_id = 3; // å•èŠï¼šå¯¹æ–¹IDï¼›ç¾¤èŠï¼šç¾¤ID
  int64 read_at = 4;
}

// å·²è¯»å›æ‰§ç¡®è®¤ï¼ˆæœåŠ¡ç«¯â†’å®¢æˆ·ç«¯ï¼šæ”¶åˆ° readï¼‰
message MsgReadAck {
  int64 msg_id = 1;
  int64 ack_user_id = 2;
  int64 ack_at = 3;
}

// æ¶ˆæ¯æ’¤å›
message MsgRecall {
  int64 msg_id = 1;
  int64 operator_user_id = 2;
  optional string reason = 3;
  int64 recalled_at = 4;
}

// æ¶ˆæ¯è½¬å‘
message MsgForward {
  int64 src_msg_id = 1;
  optional int64 new_msg_id = 2;
  int64 from_user_id = 3;
  int64 to_user_id = 4;
  int64 created_at = 5;
}

// Reaction æ“ä½œ
enum ReactionAction {
  RA_ADD = 0;
  RA_REMOVE = 1;
}

// æ¶ˆæ¯è¡¨æ€ï¼ˆemoji/reactionï¼‰
message MsgReaction {
  int64 msg_id = 1;
  int64 user_id = 2;
  ReactionAction action = 3;
  string emoji = 4;
  int64 at = 5;
}

// æ­£åœ¨è¾“å…¥çŠ¶æ€
enum TypingState {
  TYPING_NONE = 0;
  TYPING_TEXT = 1;
  TYPING_VOICE = 2;
  TYPING_UPLOAD = 3;
}

// æ­£åœ¨è¾“å…¥
message Typing {
  int64 from_user_id = 1;
  TypingState state = 3;
  int64 at = 4;

  oneof target {
    int64 to_user_id = 2;
    int64 group_id = 5;
  }

  repeated int64 notify_user_ids = 6;
}

// ===============
// åŠ å¯†è½½è·å°è£…ï¼ˆç«¯åˆ°ç«¯åŠ å¯†ï¼‰
// ===============
// è¯´æ˜ï¼šæœåŠ¡ç«¯åªé€ä¼ æœ¬ç»“æ„ä¸­çš„å¯†æ–‡ï¼Œä¸è§£å¯†
message EncryptedContent {
  // åŠ å¯†æ–¹æ¡ˆæ ‡è¯†ï¼Œå¦‚ "x25519+chacha20poly1305"
  string scheme = 1;
  // å‘é€æ–¹çš„ä¼šè¯å…¬é’¥ï¼ˆå¦‚ X25519 å…¬é’¥ï¼‰
  bytes sender_pub = 2;
  // ä¼šè¯/å¯†é’¥æ ‡è¯†ï¼ˆä¾¿äºæ¥æ”¶ç«¯å®šä½å¯†é’¥ææ–™ï¼‰
  string key_id = 3;
  // AEAD éšæœºæ•°/è®¡æ•°éšæœºé‡
  bytes nonce = 4;
  // AEAD å¯†æ–‡ï¼ˆå«è®¤è¯æ ‡ç­¾ï¼‰ï¼›å¯†æ–‡å†…å®¹ä¸ºâ€œå•æ¡ MessageContent çš„ Protobuf ç¼–ç â€
  // æ³¨æ„ï¼šä»…å¯¹ MessageContent åŠ å¯†ï¼Œé¡¶å±‚ Content çš„å…ƒæ•°æ®ï¼ˆsender/receiver/timestamp/scene/message_typeï¼‰ä¿æŒæ˜æ–‡
  bytes ciphertext = 5;
  // é™„åŠ è®¤è¯æ•°æ®ï¼ˆA.A.D.ï¼Œå¯ä¸ºç©ºï¼‰
  // å»ºè®®åŒ…å«ï¼šmessage_id|sender_id|receiver_id|scene|timestampï¼ˆæŒ‰ä¸€è‡´åºæ‹¼æ¥ï¼‰ï¼Œç”¨äºç«¯åˆ°ç«¯é˜²ç¯¡æ”¹
  bytes aad = 6;
  // å‘é€æ–¹æœ¬åœ°å•è°ƒæ¶ˆæ¯åºå·ï¼ˆé˜²é‡æ”¾/ä¹±åºï¼‰
  uint64 msg_no = 7;
}
